<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/svg+xml" href="favicon.svg" />
  
  <!-- Primary Meta Tags -->
  <title>P≈ôihl√°≈°en√≠ ‚Äì GURMAO | Synchronizuj sv√© sb√≠rky</title>
  <meta name="title" content="P≈ôihl√°≈°en√≠ ‚Äì GURMAO | Synchronizuj sv√© sb√≠rky">
  <meta name="description" content="P≈ôihla≈° se do GURMAO a synchronizuj sv√© sb√≠rky restaurac√≠ nap≈ô√≠ƒç za≈ô√≠zen√≠mi. Z√≠skej AI doporuƒçen√≠ podle tv√Ωch preferenc√≠." />
  <link rel="canonical" href="https://gurmao.cz/login.html" />
  <meta name="robots" content="noindex, follow" />
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            gurmaoblack: '#0b0b0d',
            gurmaogold: '#d4af37',
            gurmaored: '#8b1d18',
          },
          boxShadow: { glow: '0 0 40px rgba(212,175,55,0.35)' }
        }
      }
    }
  </script>

  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="toast.css">
  <style>
    body { font-family: 'Inter', sans-serif; }
    h1,h2,h3 { font-family: 'Playfair Display', serif; }
  </style>
</head>
<body class="bg-gurmaoblack text-white overflow-x-hidden">

<script src="toast.js"></script>

<script type="module">
  // Redirect if already logged in
  const user = JSON.parse(localStorage.getItem('gurmao_user') || 'null');
  if (user?.loggedIn) {
    window.location.href = 'feed.html';
  }
</script>

<header class="sticky top-0 z-50 bg-gurmaoblack/80 backdrop-blur border-b border-white/10">
  <div class="max-w-6xl mx-auto px-6 py-4 flex items-center justify-between">
    <a href="index.html" class="text-2xl font-bold tracking-tight">GUR<span class="text-gurmaogold">M</span>AO</a>
    <nav class="hidden md:flex gap-6 text-sm">
      <a href="feed.html" class="hover:text-gurmaogold">Feed</a>
      <a href="restaurace.html" class="hover:text-gurmaogold">Restaurace</a>
      <a href="kuchar.html" class="hover:text-gurmaogold">Kucha≈ôi</a>
      <a href="gear.html" class="hover:text-gurmaogold">Gear</a>
      <a href="ai.html" class="hover:text-gurmaogold">AI</a>
      <a href="mapa.html" class="hover:text-gurmaogold">Mapa</a>
      <a href="collections.html" class="hover:text-gurmaogold">Sb√≠rky</a>
    </nav>
    <button id="menuBtn" class="md:hidden w-11 h-11 rounded-full bg-white/5 border border-white/15 hover:border-gurmaogold hover:text-gurmaogold transition">‚ò∞</button>
  </div>

  <div id="menuBackdrop" class="hidden fixed inset-0 bg-black/70 z-40"></div>
  <div id="mobileMenu" class="hidden fixed inset-x-0 top-[65px] z-50">
    <div class="mx-4 rounded-3xl border border-white/10 bg-gurmaoblack/95 backdrop-blur p-4">
      <div class="flex items-center justify-between px-2 pb-3">
        <div class="text-sm text-white/60">Navigace</div>
        <button id="menuClose" class="w-10 h-10 rounded-full bg-white/5 border border-white/15 hover:border-gurmaogold hover:text-gurmaogold transition">‚úï</button>
      </div>
      <nav class="grid gap-2">
        <a href="index.html" class="px-4 py-3 rounded-2xl bg-white/5 hover:bg-white/10">Dom≈Ø</a>
        <a href="feed.html" class="px-4 py-3 rounded-2xl bg-white/5 hover:bg-white/10">Feed</a>
        <a href="restaurace.html" class="px-4 py-3 rounded-2xl bg-white/5 hover:bg-white/10">Restaurace</a>
        <a href="kuchar.html" class="px-4 py-3 rounded-2xl bg-white/5 hover:bg-white/10">Kucha≈ôi</a>
        <a href="gear.html" class="px-4 py-3 rounded-2xl bg-white/5 hover:bg-white/10">Gear</a>
        <a href="ai.html" class="px-4 py-3 rounded-2xl bg-white/5 hover:bg-white/10">AI</a>
        <a href="collections.html" class="px-4 py-3 rounded-2xl bg-white/5 hover:bg-white/10">Sb√≠rky</a>
      </nav>
    </div>
  </div>
</header>

<section class="min-h-screen flex items-center justify-center px-6 py-20">
  <div class="w-full max-w-md">
    
    <!-- TABS -->
    <div class="flex gap-2 mb-8">
      <button id="tabLogin" class="flex-1 px-6 py-3 rounded-full bg-gurmaogold text-black font-semibold transition">P≈ôihl√°sit se</button>
      <button id="tabSignup" class="flex-1 px-6 py-3 rounded-full bg-white/5 hover:bg-white/10 transition">Registrovat</button>
    </div>

    <!-- LOGIN FORM -->
    <div id="loginForm" class="rounded-3xl bg-white/5 border border-white/10 p-8">
      <h1 class="text-3xl mb-2">V√≠tej zpƒõt</h1>
      <p class="text-white/60 mb-8">P≈ôihla≈° se a pokraƒçuj ve sv√Ωch sb√≠rk√°ch.</p>

      <form id="formLogin" class="space-y-6">
        <div>
          <label class="block text-sm text-white/70 mb-2">Email</label>
          <input type="email" id="loginEmail" required class="w-full px-4 py-3 rounded-2xl bg-black/40 border border-white/10 focus:border-gurmaogold outline-none" placeholder="tvuj@email.cz" />
        </div>

        <div>
          <label class="block text-sm text-white/70 mb-2">Heslo</label>
          <input type="password" id="loginPassword" required class="w-full px-4 py-3 rounded-2xl bg-black/40 border border-white/10 focus:border-gurmaogold outline-none" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
        </div>

        <div class="flex items-center justify-between text-sm">
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="checkbox" class="w-4 h-4 rounded border-white/20 bg-black/40">
            <span class="text-white/60">Zapamatovat</span>
          </label>
          <a href="#" class="text-gurmaogold hover:underline">Zapomenut√© heslo?</a>
        </div>

        <button type="submit" class="w-full px-8 py-4 rounded-full bg-gurmaogold text-black font-semibold shadow-glow hover:scale-[1.02] transition">
          P≈ôihl√°sit se
        </button>

        <div class="relative my-6">
          <div class="absolute inset-0 flex items-center">
            <div class="w-full border-t border-white/10"></div>
          </div>
          <div class="relative flex justify-center text-sm">
            <span class="px-4 bg-gurmaoblack text-white/60">nebo</span>
          </div>
        </div>

        <button type="button" class="w-full px-6 py-3 rounded-full border border-white/20 hover:border-gurmaogold hover:text-gurmaogold transition flex items-center justify-center gap-3">
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
          Pokraƒçovat s Google
        </button>
      </form>
    </div>

    <!-- SIGNUP FORM -->
    <div id="signupForm" class="hidden rounded-3xl bg-white/5 border border-white/10 p-8">
      <h1 class="text-3xl mb-2">Vytvo≈ô √∫ƒçet</h1>
      <p class="text-white/60 mb-8">Registruj se a synchronizuj sb√≠rky mezi za≈ô√≠zen√≠mi.</p>

      <form id="formSignup" class="space-y-6">
        <div>
          <label class="block text-sm text-white/70 mb-2">Jm√©no</label>
          <input type="text" id="signupName" required class="w-full px-4 py-3 rounded-2xl bg-black/40 border border-white/10 focus:border-gurmaogold outline-none" placeholder="Jan Nov√°k" />
        </div>

        <div>
          <label class="block text-sm text-white/70 mb-2">Email</label>
          <input type="email" id="signupEmail" required class="w-full px-4 py-3 rounded-2xl bg-black/40 border border-white/10 focus:border-gurmaogold outline-none" placeholder="tvuj@email.cz" />
        </div>

        <div>
          <label class="block text-sm text-white/70 mb-2">Heslo</label>
          <input type="password" id="signupPassword" required minlength="8" class="w-full px-4 py-3 rounded-2xl bg-black/40 border border-white/10 focus:border-gurmaogold outline-none" placeholder="Minim√°lnƒõ 8 znak≈Ø" />
        </div>

        <label class="flex items-start gap-3 cursor-pointer">
          <input type="checkbox" required class="w-4 h-4 mt-1 rounded border-white/20 bg-black/40">
          <span class="text-sm text-white/60">Souhlas√≠m s <a href="#" class="text-gurmaogold hover:underline">podm√≠nkami pou≈æit√≠</a> a <a href="#" class="text-gurmaogold hover:underline">zpracov√°n√≠m osobn√≠ch √∫daj≈Ø</a>.</span>
        </label>

        <button type="submit" class="w-full px-8 py-4 rounded-full bg-gurmaogold text-black font-semibold shadow-glow hover:scale-[1.02] transition">
          Vytvo≈ôit √∫ƒçet
        </button>

        <div class="relative my-6">
          <div class="absolute inset-0 flex items-center">
            <div class="w-full border-t border-white/10"></div>
          </div>
          <div class="relative flex justify-center text-sm">
            <span class="px-4 bg-gurmaoblack text-white/60">nebo</span>
          </div>
        </div>

        <button type="button" class="w-full px-6 py-3 rounded-full border border-white/20 hover:border-gurmaogold hover:text-gurmaogold transition flex items-center justify-center gap-3">
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
          Pokraƒçovat s Google
        </button>
      </form>
    </div>

    <p class="text-center text-sm text-white/40 mt-8">
      üí° Tip: V MVP re≈æimu pou≈æ√≠v√°me localStorage. Pro plnou funkƒçnost se autentizace aktivuje po p≈ôipojen√≠ backendu.
    </p>

  </div>
</section>

<footer class="py-10 border-t border-white/10 text-center text-sm text-white/40">
  ¬© 2025 GURMAO.cz ¬∑ Nejez. Pro≈æij.
</footer>

<script src="app.js"></script>

<!-- Tab switching (must run immediately, not in module) -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const tabLogin = document.getElementById('tabLogin');
    const tabSignup = document.getElementById('tabSignup');
    const loginForm = document.getElementById('loginForm');
    const signupForm = document.getElementById('signupForm');

    tabLogin.addEventListener('click', () => {
      tabLogin.classList.add('bg-gurmaogold', 'text-black');
      tabLogin.classList.remove('bg-white/5');
      tabSignup.classList.remove('bg-gurmaogold', 'text-black');
      tabSignup.classList.add('bg-white/5');
      loginForm.classList.remove('hidden');
      signupForm.classList.add('hidden');
    });

    tabSignup.addEventListener('click', () => {
      tabSignup.classList.add('bg-gurmaogold', 'text-black');
      tabSignup.classList.remove('bg-white/5');
      tabLogin.classList.remove('bg-gurmaogold', 'text-black');
      tabLogin.classList.add('bg-white/5');
      signupForm.classList.remove('hidden');
      loginForm.classList.add('hidden');
    });
  });
</script>

<script type="module">
  // Import Supabase helpers
  import { signIn, signUp, signInWithGoogle } from './supabase-client.js';

  // SUPABASE: Real login
  document.getElementById('formLogin').addEventListener('submit', async (e) => {
    e.preventDefault();
    const email = document.getElementById('loginEmail').value;
    const password = document.getElementById('loginPassword').value;
    
    const loadingToast = toastLoading('P≈ôihla≈°ov√°n√≠...');
    
    try {
      const { user, session } = await signIn(email, password);
      
      // Store user info
      localStorage.setItem('gurmao_user', JSON.stringify({
        id: user.id,
        email: user.email,
        name: user.user_metadata?.display_name || user.email.split('@')[0],
        loggedIn: true
      }));
      
      toast.update(loadingToast, '‚úÖ P≈ôihl√°≈°en√≠ √∫spƒõ≈°n√©!', 'success');
      
      // Redirect to collections or return URL
      setTimeout(() => {
        const returnUrl = new URLSearchParams(window.location.search).get('return') || 'collections.html';
        window.location.href = returnUrl;
      }, 500);
    } catch (error) {
      console.error('Login error:', error);
      toast.update(loadingToast, '‚ùå ' + error.message, 'error');
    }
  });

  // SUPABASE: Real signup
  document.getElementById('formSignup').addEventListener('submit', async (e) => {
    e.preventDefault();
    const name = document.getElementById('signupName').value;
    const email = document.getElementById('signupEmail').value;
    const password = document.getElementById('signupPassword').value;
    
    const loadingToast = toastLoading('Registrace...');
    
    try {
      const { user } = await signUp(email, password, name);
      
      toast.update(loadingToast, '‚úÖ Zkontroluj email pro potvrzen√≠!', 'success');
      
      // Switch to login tab
      setTimeout(() => tabLogin.click(), 1000);
    } catch (error) {
      console.error('Signup error:', error);
      toast.update(loadingToast, '‚ùå ' + error.message, 'error');
    }
  });

  // SUPABASE: Google OAuth
  const googleButtons = document.querySelectorAll('button[type="button"]');
  googleButtons.forEach(btn => {
    btn.addEventListener('click', async (e) => {
      e.preventDefault();
      const loadingToast = toastLoading('P≈ôihla≈°ov√°n√≠ p≈ôes Google...');
      
      try {
        await signInWithGoogle();
        // Supabase automaticky p≈ôesmƒõruje
      } catch (error) {
        console.error('Google login error:', error);
        toast.update(loadingToast, '‚ùå ' + error.message, 'error');
      }
    });
  });
</script>

</body>
</html>
